{"version":3,"sources":["webpack:///./js/conf/index.js"],"names":[],"mappings":";;;;;;AAAA,yCAAa;;AAEb,aAAa,mBAAO,CAAC,CAAS;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,CAAC,EAAE;AACH;AACA;AACA;AACA;AACA;;AAEA,c","file":"index.js","sourcesContent":["'use strict';\n\nvar _utils = require('./utils');\n\n$(function () {\n  /* 判断并提示微信环境打开 */\n  if (!window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i) === 'micromessenger') {\n    alert('添加微信观看提示');\n  }\n  /* begin 预加载 */\n  var deBug = true,\n      //是否是开发时快速查看测试的效果\n  canvas1Img = [],\n      timer1 = null;\n  if (!deBug) {\n    initPreLoad();\n  } else {\n    $('video').hide();\n    $('.loading-end-btn').show();\n    var imgUrl = '../../images/begin/bg/',\n        imgArr = [0, 3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108, 111, 114, 117, 120, 123, 126, 129, 132, 135, 138, 141, 144, 147];\n    canvas1Img = _utils.utils.prestrain(imgArr, imgUrl, 'jpg', function () {});\n    $('.title').addClass('show');\n  }\n\n  function initPreLoad() {\n    /* 使用javascript对图片进行预加载 */\n    var num = 0,\n        progress = 0; //预备变量、预加载page1所需的图片\n    var imgUrl = '../../images/begin/bg/',\n        imgArr = [0, 3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108, 111, 114, 117, 120, 123, 126, 129, 132, 135, 138, 141, 144, 147],\n        musicUrl = '../../images/assets/',\n        musicArr = ['bicycle', 'bird', 'car', 'cat', 'choose', 'click', 'fly', 'stage', 'train', 'walk'],\n        countNum = musicArr.length + imgArr.length;\n\n    function loadAni(num) {\n      /* 加载进度条的动画 */\n      progress = parseInt(num / countNum * 100);\n      $('.loading-progress-number').animate({\n        count: progress\n      }, {\n        duration: 150,\n        step: function step() {\n          if (isNaN(this.count)) {\n            this.count = 0;\n            return;\n          }\n          var boxText = Math.ceil(Number(this.count));\n          if (boxText >= 100) {\n            boxText = 100;\n            $('.loading-text').css('display', 'none');\n            $('.loading-end-btn').css('display', 'block');\n          }\n          $('.loading-progress-number').text(boxText + '%');\n          $('.loading-progress-width').css('width', boxText + '%');\n        }\n      });\n    }\n    canvas1Img = _utils.utils.prestrain(imgArr, imgUrl, 'jpg', function () {\n      num++;\n      loadAni(num);\n    });\n    _utils.utils.prestrain(musicArr, musicUrl, 'mp3', function () {\n      num++;\n      loadAni(num);\n    });\n  }\n\n  /* 视频开始按钮 */\n  $('.loading-end-btn').on('click', function () {\n    var myVideo = document.getElementById('myVideo');\n    $('.loading').fadeOut();\n    /* 插入video并开始播放 */\n    if (myVideo && myVideo.readyState) {\n      console.log('视频准备就绪');\n      myVideo.play(); //开始播放、paused暂停播放\n    } else {\n        /* 视频下载失败，执行重新加载 */\n      }\n  });\n\n  $('.video').on('error', function () {\n    alert('视频加载失败，请刷新重试');\n  });\n  /* 视频结束 */\n  $('.video').on('ended', function () {\n    $(this).fadeOut();\n    $('.page1').fadeIn();\n    $('.title').addClass('show');\n    $('.music-btn').removeClass('hide');\n    /* canvas绘制page1的背景 */\n    var canvas1 = document.getElementById('canvas1');\n    canvas1 && _utils.utils.canvasWH(canvas1);\n    var context1 = canvas1.getContext('2d'),\n        _i = 0;\n    context1.drawImage(canvas1Img[_i], 0, 0, _utils.utils.oW, _utils.utils.oH);\n    timer1 = setInterval(function () {\n      _i++;\n      if (_i >= canvas1Img.length) {\n        _i = 0;\n      }\n      context1.clearRect(0, 0, _utils.utils.oW, _utils.utils.oH);\n      context1.drawImage(canvas1Img[_i], 0, 0, _utils.utils.oW, _utils.utils.oH);\n      console.log(canvas1Img[_i]);\n    }, 100);\n    /* 预加载page2的长屏幕动画所需图 */\n  });\n  $('.page1 .txt').on('click', function () {\n    /* 销毁page1、canvas1、动画定时器、视频等 */\n    $('.loading').remove();\n    $('.video').remove();\n    clearInterval(timer1);\n    timer1 = null;\n    $('.page1').remove();\n    $('.page2').show();\n  });\n  $('.sex-box li').on('click', function () {\n    $(this).addClass('cur');\n    setTimeout(function () {\n      $('.choose-sex').fadeOut();\n      $('.choose-person').fadeIn();\n    }, 500);\n  });\n}); /*\r\n     * @Author: @Guojufeng \r\n     * @Date: 2018-11-05 09:35:14 \r\n     * @Last Modified by: @Guojufeng\r\n     * @Last Modified time: 2018-11-05 17:32:53\r\n     */\n\n/* global $ */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/conf/index.js\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}